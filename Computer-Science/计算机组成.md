# 计算机组成

## 课程结构

1. 计算机基本结构

2. 指令系统体系结构

3. 算术逻辑单元

4. 乘法器和除法器

5. 单周期处理器

6. 流水线处理器

7. 存储层次结构

8. 中断和异常

9. 输入输出设备


## 1. 计算机基本结构

“冯·诺依曼”体系结构是现代电子计算机体系结构。

冯·诺依曼对 ENIAC 的分析导致 EDVAC 的诞生

EDVAC 的特点在于：

- 数据和程序共同存储在存储器上，实现“存储程序”概念，即存储程序式计算机

消除之前从外部读取程序的速度慢与 CPU 处理的速度快导致的资源浪费问题

- 指令和数据采用二进制，极大简化逻辑线路

- 由 5 个基本部分组成，运算器、控制器、存储器、输入设备和输出设备

1.1 冯·诺依曼结构的要点

执行指令是计算机运转的核心，一条指令的执行包括：

取指 -> 译码 -> 执行 -> 回写

1.2 计算机结构简化模型

![image.png](http://upload-images.jianshu.io/upload_images/1993435-3a5ecfe5ab146343.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-82c6cd7dde9e82ff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-50e47eca7c88c4ff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-99ec2d0ee2ea79bc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-e9c4a57eadb4440d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-2bf272d8d4ef38e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-7d1b8ba48c7aef33.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-6100621ddad387c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

1.3 计算机执行指令的过程

计算机执行指令的步骤：
取指 -> 译码 -> 执行 -> 回写
![image.png](http://upload-images.jianshu.io/upload_images/1993435-36a66136dddf96f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

1.4 计算机的输入和输出

![image.png](http://upload-images.jianshu.io/upload_images/1993435-14bdb5c15d72c7d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-696eaf17750bafe9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-648cd4dadb1482d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-f8cd7bb4698ecee6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](http://upload-images.jianshu.io/upload_images/1993435-f8a5293156934ff7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

1.5 冯·诺依曼结构和具体实现

北桥是连接 CPU 和主存储器的电子元件

南桥是各个输入输出设备控制器的集成

当计算机刚启动时，CPU 是无法获得外部存储器的指令的，因为配置和访问外部存储器还是需要程序来控制，即驱动程序，那么该硬盘驱动程序存储在哪？BIOS 芯片上（与南桥相连，ROM）。

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/44567665.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/34648670.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/99726197.jpg)


![](http://o97duqgf5.bkt.clouddn.com/18-1-13/99726197.jpg)
![](http://o97duqgf5.bkt.clouddn.com/18-1-13/11543875.jpg)

# 2. 指令系统体系结构

如何进行指令的解读的系统

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/15548775.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/13098324.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/14670164.jpg)

2.1 x86 体系结构

CPU 的字长通常表示同一时间内处理二进制数的位数，主要表现在 ALU 在同一时间内处理数据的位数，例如 32 位 CPU 表示在同一时间内可以处理 32 位的数据，而 ALU 运算所需的数据通常放在通用寄存器中，所以通用寄存器也是 32 位的；

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/69619906.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/17797308.jpg)

8086 x86 通用寄存器
![](http://o97duqgf5.bkt.clouddn.com/18-1-13/35796577.jpg)

由于 8086 内部指令指针寄存器的寻址能力是 16 位，无法满足寻找出主存 20 位的存储能力的地址，所以需要段寄存器配合其他寄存器（IR）联合生成存储器地址；



![](http://o97duqgf5.bkt.clouddn.com/18-1-13/54165820.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/35176905.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/38283483.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/88406327.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/99713370.jpg)

[注]

CPU 主频 * CPU 位数 = 带宽

12.5 MHz * 32 bits = 50 MB / s

80386 寄存器

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/80275777.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/59340048.jpg)

IA-32 为 Intel Architecture 32bit

2.2 x86 指令系统结构

x86 指令体系结构是复杂指令体系结构的代码；

指令的主要类别
![](http://o97duqgf5.bkt.clouddn.com/18-1-13/87522415.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/41571930.jpg)

传送指令

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/83643765.jpg)

运算指令

x86 指令系统是变长指令系统，可根据指令需要设计指令的长度

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/82299701.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/23653141.jpg)

转移指令

控制指令

2.3 复杂的 x86 指令

x86 指令的通用格式

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/54245590.jpg)

2.4 MIPS 体系结构

MIPS 是精简指令系统的代表，
![](http://o97duqgf5.bkt.clouddn.com/18-1-13/74198384.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/38871123.jpg)


![](http://o97duqgf5.bkt.clouddn.com/18-1-13/48088160.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/28889078.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/67637630.jpg)

2.5 MIPS 指令的特点

MIPS（Microprocessor without interlocked piped stages）
指令集精简，单个指令功能单一

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/98194181.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/8922652.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/77223175.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/93050450.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/8230235.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/91537599.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/77222963.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/24480468.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/26406106.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/74936712.jpg)

![](http://o97duqgf5.bkt.clouddn.com/18-1-13/11169361.jpg)



